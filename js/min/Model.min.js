var M={pages:{init:function(a){var a=this[a];M.settings.hdr_eno&&V.current_page&&$("#header h2").text(a.title.split("").reverse().join("")),a.init()},dashboard:{title:"Dashboard",selector:"dashboard",init:function(){$("#dash-item-0").on("click",function(a){V.go_to_page("enochiana")})}},enochiana:{title:"Enochiana",selector:"enochiana",init:function(){$(".grid-icon").on("click",function(a){M.pages.key.current=$(a.target).attr("data-key")||$(a.target).parent().attr("data-key"),V.go_to_page("key")})}},key:{title:"Key",selector:"key",init:function(){M.pages.key.go_to_view(M.pages.key.views_registry[M.settings.key_view]);var a=$(".view-ctrl .btn");a.on("click",function(a){var b=M.pages.key.views_registry[$(a.target).attr("data-view")];M.pages.key.go_to_view(b),$(".view-ctrl .btn").removeClass("selected"),$(a.target).addClass("selected")});for(var b=0;b<a.length;b++)$(a[b]).attr("data-view")==M.settings.key_view?$(a[b]).addClass("selected"):$(a[b]).removeClass("selected");var c=enochian_keys[M.pages.key.current].title;$("#key h3.page-title").text(c),M.pages.key.bind_nav_btns()},current:!1,strip_punc:function(a){return a.replace(/[.,\/#!?$%\^&\*;:{}=\-_`~()]/g,"")},go_to_view:function(a){if(M.pages.key.views[a].init(),M.pages.key.views.current!=M.pages.key.views[a].index){$("#key .view *").unbind();for(var b=$("#key .view"),c=0;c<b.length;c++)$(b[c]).hasClass("show")&&$(b[c]).removeClass("show").addClass("hidden");M.pages.settings.toggle_eno_font(),setTimeout(function(){$("#key .view.hidden").addClass("gone"),$(["#",a].join("")).removeClass("gone"),document.getElementById("key").scrollTo(0,0),M.settings.key_view=M.pages.key.views[a].index,M.save_settings(),setTimeout(function(){$(["#",a].join("")).removeClass("hidden").addClass("show")},10)},500),M.pages.key.views.current=M.pages.key.views[a].index,M.pages.key.bind_nav_btns()}else setTimeout(function(){$("#key .view.hidden").addClass("gone"),$(["#",a].join("")).removeClass("gone"),document.getElementById("key").scrollTo(0,0),setTimeout(function(){$(["#",a].join("")).removeClass("hidden").addClass("show")},10)},500)},bind_nav_btns:function(){$(".prev-key").on("click",function(a){M.pages.key.current=Number(M.pages.key.current)-1,V.current_page=!1,V.go_to_page("key")}),$(".next-key").on("click",function(a){M.pages.key.current=Number(M.pages.key.current)+1,V.current_page=!1,V.go_to_page("key")}),0==M.pages.key.current?$(".prev-key").addClass("hidden"):$(".prev-key").removeClass("hidden"),M.pages.key.current==enochian_keys.length-1?$(".next-key").addClass("hidden"):$(".next-key").removeClass("hidden")},views:{current:0,eng_eno_table:{index:0,init:function(){for(var a=M.pages.key.current,b=enochian_keys[a],c=document.createDocumentFragment(),d=0;d<b.content.length;d++){var e=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eno"}]}),f=V.el_factory({tag:"span",attrs:[{attr:"class",val:"num"}],html:[Number(a)+1,d+1].join(".")}),g=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eno1 enoch-reg"}],html:M.pages.key.strip_punc(b.content[d].eno).split("").reverse().join("")}),h=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eno2"}],html:b.content[d].eno}),i=V.el_factory({tag:"div",attrs:[{attr:"class",val:"space enoch-reg"}],html:"B"}),j=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eng"}]}),k=V.el_factory({tag:"div",html:b.content[d].eng}),l=V.el_factory({tag:"div",attrs:[{attr:"class",val:"word"}]});e.appendChild(f),e.appendChild(g),e.appendChild(h),j.appendChild(i),j.appendChild(k),l.appendChild(e),l.appendChild(j),c.appendChild(l)}$("#key #eng_eno_table .key-content").text("").append(c)}},eng_eno:{index:1,init:function(){for(var a=M.pages.key.current,b=enochian_keys[a],c=document.createDocumentFragment(),d=0;d<b.content.length;d++){var e=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eno"}],html:b.content[d].eno}),f=V.el_factory({tag:"div",attrs:[{attr:"class",val:"eng"}],html:b.content[d].eng}),g=V.el_factory({tag:"div",attrs:[{attr:"class",val:"word"}]});g.appendChild(e),g.appendChild(f),c.appendChild(g)}$("#key #eng_eno .key-content").text("").append(c)}},eno_only:{index:2,init:function(){for(var a=M.pages.key.current,b=enochian_keys[a],c="",d=0;d<b.content.length;d++){c+=M.pages.key.strip_punc(b.content[d].eno),c+=" "}$("#key #eno_only p bdo").text(c)}},eno_pronounce:{index:3,init:function(){for(var a=M.pages.key.current,b=enochian_keys[a],c="",d=0;d<b.content.length;d++)c+=b.content[d].eno,c+=" ";$("#key #eno_pronounce p").text(c)}},eng_only:{index:4,init:function(){for(var a=M.pages.key.current,b=enochian_keys[a],c="",d=0;d<b.content.length;d++)c+=b.content[d].eng,c+=" ";$("#key #eng_only p").text(c)}}},views_registry:["eng_eno_table","eng_eno","eno_only","eno_pronounce","eng_only"]},settings:{title:"Settings",selector:"settings",init:function(){$("#hdr-font").on("click",function(a){M.pages.settings.toggle_hdr_font(),M.settings.hdr_eno=!M.settings.hdr_eno,M.save_settings()}),$("#eno-font").on("click",function(a){M.settings.schueler=!M.settings.schueler,M.save_settings(),M.pages.settings.toggle_eno_font()}),$("div.swatch-group").on("click",function(a){var b=$(a.target).attr("data-theme")||$(a.target).parent().attr("data-theme");M.pages.settings.change_theme(b),M.settings.theme=b,M.save_settings()}),$("#clear-settings").on("click",M.clear_settings),M.settings.hdr_eno&&$("#hdr-font").attr("checked","checked"),M.settings.schueler&&$("#eno-font").attr("checked","checked")},toggle_hdr_font:function(a){for(var b=$("h2, h3"),c=0;c<b.length;c++)if(!$(b[c]).hasClass("always")&&!$(b[c]).hasClass("tall-num")){var d=$(b[c]).text();$(b[c]).text(d.split("").reverse().join(""));var e;e=M.settings.schueler?"schueler-mono":"enoch-mono",$(b[c]).hasClass(e)?$(b[c]).removeClass(e):$(b[c]).addClass(e)}for(var f=$("#nav-menu a"),c=0;c<f.length;c++)if(!$(f[c]).hasClass("always")){var d=$(f[c]).text();$(f[c]).text(d.split("").reverse().join(""));var e;e=M.settings.schueler?"schueler-reg":"enoch-reg",$(f[c]).hasClass(e)?$(f[c]).removeClass(e):$(f[c]).addClass(e)}},toggle_eno_font:function(a){M.settings.schueler?($(".enoch-mono").removeClass("enoch-mono").addClass("schueler-mono"),$(".enoch-reg").removeClass("enoch-reg").addClass("schueler-reg")):($(".schueler-mono").removeClass("schueler-mono").addClass("enoch-mono"),$(".schueler-reg").removeClass("schueler-reg").addClass("enoch-reg"))},change_theme:function(a){var b=["css/min/theme_",a,".min.css"].join("");$("#theme-stylesheet").attr("href",b)}}},settings:{hdr_eno:!1,schueler:!1,key_view:0,theme:"turq"},save_settings:function(){window.localStorage.setItem("settings",JSON.stringify(M.settings))},load_settings:function(){window.localStorage.getItem("settings")?M.settings=JSON.parse(window.localStorage.getItem("settings")):M.save_settings()},apply_settings:function(){M.settings.hdr_eno&&M.pages.settings.toggle_hdr_font()},clear_settings:function(){window.localStorage.removeItem("settings"),document.location.reload()}},nav_pages=[M.pages.dashboard,M.pages.enochiana,M.pages.settings];